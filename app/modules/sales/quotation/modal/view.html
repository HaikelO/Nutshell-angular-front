<div class="modal-header">
    <h3 class="modal-title" id="modal-title">Nouveau Devis</h3>
</div>
<div class="row modal-body" id="modal-body"> 
    <div class="col-md-12">
        <div class="">
            <div layout="column" ng-cloak="" class="autocompletedemoBasicUsage">
                <form ng-submit="$event.preventDefault()">
                    <md-autocomplete ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="vm.C.selectedItem" md-search-text-change="vm.searchTextChange(vm.C.searchText)" md-search-text="vm.C.searchText" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearch(vm.C.searchText)  | orderBy:'-'" md-item-text="item.display" md-min-length="0" md-floating-label="Client">
                        <md-item-template>
                        <span md-highlight-text="vm.C.searchText" md-highlight-flags="^i">{{item.display}}</span>
                        </md-item-template>
                        <md-not-found>
                        No states matching "{{vm.C.searchText}}" were found.
                        <a ng-click="vm.newClient(vm.C.searchText)">Create a new one!</a>
                        </md-not-found>
                    </md-autocomplete>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <div class="row">
            <div class="col-md-6">
                <md-input-container class="md-block">
                    <input type="date" ng-model="vm.F.date" aria-label="Date" placeholder="Date">
                </md-input-container>
            </div>
        </div>
    </div>
    <div class="col-md-12">
        <table class="table box">
            <thead class="thead-inverse">
                <tr>
                    <th class="text-center">
                        Référence
                    </th>
                    <th class="text-center">
                        Désignation
                    </th>
                    <th class="text-center">
                        Quantité
                    </th>
                    <th class="text-center">
                        Prix/U(HT)
                    </th>
                    <th class="text-center">
                        Prix/U(TTC)
                    </th>
                    <th class="text-center">
                        Montant(TTC)
                    </th>
                    <th class="text-center">
                        TVA
                    </th>
                    <th class="text-center">
                        
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="produit in vm.Produits">
                    <td>
                        <div layout="column" ng-cloak="" class="autocompletedemoBasicUsage">
                            <form ng-submit="$event.preventDefault()">
                                <md-autocomplete ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="produit.selectedItem" md-search-text-change="vm.searchTextChange(produit.searchText)" md-search-text="produit.searchText" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearchproduits(produit.searchText)" md-item-text="item.display" md-min-length="0" md-floating-label="Référence" aria-label="Référence">
                                    <md-item-template>
                                        <span md-highlight-text="produit.searchText" md-highlight-flags="^i">{{item.display}}</span>
                                    </md-item-template>
                                    <md-not-found>
                                        No states matching "{{produit.P.searchText}}" were found.
                                        <a ng-click="vm.newClient(vm.searchText)">Create a new one!</a>
                                    </md-not-found>
                                </md-autocomplete>
                            </form>
                        </div>
                    </td>
                    <td>
                        <div layout="column" ng-cloak="" class="autocompletedemoBasicUsage">
                            <form ng-submit="$event.preventDefault()">
                                <md-autocomplete ng-disabled="vm.isDisabled" md-no-cache="vm.noCache" md-selected-item="produit.selectedItem" md-search-text-change="vm.searchTextChange(produit.searchTextD)" md-search-text="produit.searchTextD" md-selected-item-change="vm.selectedItemChange(item)" md-items="item in vm.querySearchproduitsD(produit.searchTextD)" md-item-text="item.denomination" md-min-length="0" md-floating-label="Désignation" aria-label="Désignation">
                                    <md-item-template>
                                        <span md-highlight-text="produit.searchTextD" md-highlight-flags="^i">{{item.denomination}}</span>
                                    </md-item-template>
                                    <md-not-found>
                                        No states matching "{{produit.P.searchText}}" were found.
                                        <a ng-click="vm.newClient(vm.searchTextD)">Create a new one!</a>
                                    </md-not-found>
                                </md-autocomplete>
                            </form>
                        </div>
                    </td>
                    <td>
                        <md-input-container class="md-block" flex-gt-xs="">
                            <input  type="number" ng-change="vm.totalFacture(produit)" ng-model="produit.quantite" aria-label="Quantité">
                        </md-input-container>
                    </td>
                    <td>
                        <md-input-container class="md-block" flex-gt-xs="">
                            <input type="text" ng-change="vm.totalFacture(produit)" ng-model="produit.ht" aria-label="Prix/U/HT">
                        </md-input-container>
                    </td>
                    <td>
                        <md-input-container class="md-block" flex-gt-xs="">
                            <input type="number" ng-change="vm.totalFacture(produit)" ng-model="produit.selectedItem.prix.vente" aria-label="Prix/U/TTC">
                        </md-input-container>
                    </td>
                    <td>
                        <md-input-container class="md-block" flex-gt-xs="">
                            <input type="number" ng-disabled="true" ng-model="produit.tttc" value="produit.selectedItem.prix.vente * produit.quantite" aria-label="TTC">
                        </md-input-container>
                    </td>
                    <td>
                        <md-input-container class="md-block" flex-gt-xs="">
                            <input type="text" ng-disabled="true" ng-model="vm.thtp" aria-label="">
                        </md-input-container>
                    </td>
                    <td>
                        <button class="btn btn-danger" ng-click="vm.delChamp($index)"><span class="glyphicon glyphicon-remove"></span></button>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td>
                        <button class="btn btn-default form-control" ng-click="vm.ajouterChamp()"><span class="glyphicon glyphicon-plus"></span></button>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><label for="">Total(HT):</label></td>
                    <td>{{vm.F.prix.ht | number:2}}</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><label for="">Total(TTC):</label></td>
                    <td>{{vm.F.prix.ttc | number:2}}</td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-success" type="button" ng-click="vm.ok(vm.F)">Enregistrer</button>
    <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Annuler</button>
</div>